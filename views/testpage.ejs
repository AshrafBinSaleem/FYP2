<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script type="text/javascript">
    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart', 'line'] });
    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);
    google.charts.setOnLoadCallback(drawPieChart);
    //console.log(a);
    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {


      var data = new google.visualization.DataTable();
      var Header = [<%- tit %>];
      var HeaderType = [<%- coltype %>];

      for (let index = 0; index < Header.length; index++) {
        data.addColumn(HeaderType[index], Header[index]);

      }
      
      var month = [<%- mon %> ];
      var chartsdata = [<%- data %>];
      console.log(month.length);
      for (var i = 0; i < month.length; i++) {
        var temp = [];
        temp.push(month[i]);

        for (var index = 0; index < (Header.length - 1); index++) {
          console.log(index * month.length);
          temp.push(chartsdata[i + (index * month.length)]);
        }

        //console.log(temp);
        data.addRow(temp);
      }


      var options = {
        title: 'Sales Performance',
        series: {
          curveType: 'function'

        },
        legend: { position: 'bottom' }
      };

      var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

      chart.draw(data, options);

    }
    function drawPieChart() {
      var chartsdata = [<%- data %>];
      var totalPergame = []
     
      var totalAdd = 0
      for (var i = 0; i < chartsdata.length; i++) {
        totalAdd += chartsdata[i]
        if(((i+1) % 12) == 0){
          totalPergame.push(totalAdd)
          totalAdd = 0;
        }
       
    
      }
    var data = google.visualization.arrayToDataTable([
      ['Title', 'Sales'],
      ['Monster Hunter : World',     totalPergame[0]],
      ['Sekiro',      totalPergame[1]],
      ['CyberPunk :2077 ',  totalPergame[2]],
    ]);

    var options = {
      title: 'My Daily Activities'
    };

    var chart = new google.visualization.PieChart(document.getElementById('piechart'));

    chart.draw(data, options);
    }

  </script>
  <title>Document</title>
</head>

<body>
  <p>Hello world</p>
  <!--Div that will hold the pie chart-->
  <div id=curve_chart></div>
  <div id="piechart" style="width: 900px; height: 500px;"></div>

</body>